(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{GEVP:function(t,e,i){"use strict";i.r(e),i.d(e,"SubmissionModule",function(){return Q});var o=i("ofXK"),c=i("tyNb"),s=i("njyG"),n=i("XNiG"),r=i("fXoL"),b=i("I/3d"),d=i("Dfg1"),a=i("5eHb");function l(t,e){if(1&t){const t=r.Sb();r.Rb(0,"tr"),r.Rb(1,"td"),r.rc(2),r.Qb(),r.Rb(3,"td"),r.rc(4),r.Qb(),r.Rb(5,"td"),r.rc(6),r.Qb(),r.Rb(7,"td"),r.rc(8),r.Qb(),r.Rb(9,"td"),r.rc(10),r.Qb(),r.Rb(11,"td"),r.rc(12),r.Qb(),r.Rb(13,"td"),r.rc(14),r.Qb(),r.Rb(15,"td",19),r.Yb("click",function(){r.kc(t);const i=e.$implicit;return r.ac().onClick(i.id,i.viewsApproved,i.pathToUserRecord)}),r.rc(16),r.Qb(),r.Rb(17,"td"),r.Rb(18,"button",20),r.Yb("click",function(){r.kc(t);const i=e.$implicit;return r.ac().onImage(i.imageFile)}),r.rc(19," View Image "),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.sc(t.id),r.Ab(2),r.sc(t.date),r.Ab(2),r.sc(t.userID),r.Ab(2),r.sc(t.amountEarned),r.Ab(2),r.sc(t.numberOfContacts),r.Ab(2),r.sc(t.isPaid),r.Ab(2),r.sc(t.viewCount),r.Ab(2),r.tc(" ",t.viewsApproved," ")}}function u(t,e){if(1&t&&(r.Rb(0,"div",21),r.Nb(1,"img",22),r.Qb()),2&t){const t=r.ac();r.Ab(1),r.dc("src",t.image,r.mc)}}let h=(()=>{class t{constructor(t,e,i){this.db=t,this.exportService=e,this.toastrService=i,this.dtOptions={},this.dtTrigger=new n.a,this.data=[],this.totalAmount=0}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,responsive:!0,scrollY:"50vh",scrollX:!0},this.getData()}getData(){return new Promise((t,e)=>{this.db.collection("newSubmissions").ref.get().then(t=>{let e=1;t.forEach(i=>{this.data.push(Object.assign({id:i.id},i.data())),e==t.size&&this.dtTrigger.next(),e++}),this.totalAmount=this.data.length})})}onFillDate(t){this.db.collection("newSubmissions").ref.where("date","==",t).get().then(t=>{this.data=[],t.forEach(t=>{this.data.push(Object.assign({id:t.id},t.data()))})})}rerender(){this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}onImage(t){var e;console.log(t),this.image="",this.image=t,null===(e=document.getElementById("userModel"))||void 0===e||e.classList.add("block")}onExport(){this.exportService.exportToCsv(this.data,`${Date()}`),this.toastrService.info("Exported")}onClick(t,e,i){let o=i.split("/");"true"==e||1==e?(this.db.collection("newSubmissions").doc(t).update({viewsApproved:!1}),this.db.collection("submissions").doc(o[2]).collection(o[3]).doc(o[4]).update({viewsApproved:!1}),this.data.filter(e=>e.id==t?e.viewsApproved=!1:"")):(this.db.collection("newSubmissions").doc(t).update({viewsApproved:!0}),this.db.collection("submissions").doc(o[2]).collection(o[3]).doc(o[4]).update({viewsApproved:!0}),this.data.filter(e=>e.id==t?e.viewsApproved=!0:"")),this.toastrService.success("Updated")}loadMore(){this.getData()}ngOnDestroy(){this.dtTrigger.unsubscribe()}onFilApprove(t){t&&(this.data=this.data.filter(e=>e.viewsApproved==t)),this.toastrService.info("Filtered")}onFilEmail(t){t&&this.db.collection("users").ref.where("email","==",t).get().then(t=>{t.forEach(t=>{this.data=[],this.db.collection("newSubmissions").ref.where("userID","==",t.id).get().then(t=>{t.forEach(t=>{t.data()&&this.data.push(Object.assign({id:t.id},t.data()))})})})}),this.toastrService.info("Filtered")}onClose(){var t;null===(t=document.getElementById("userModel"))||void 0===t||t.classList.remove("block")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(b.a),r.Mb(d.a),r.Mb(a.b))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-submissions"]],viewQuery:function(t,e){if(1&t&&r.uc(s.a,1),2&t){let t;r.ic(t=r.Zb())&&(e.datatableElement=t.first)}},decls:57,vars:5,consts:[[1,"right-content"],[1,"btn",2,"float","right",3,"click"],[1,"btn",2,"float","right","margin-bottom","7px","margin-right","5px",3,"click"],["type","date","name","","id",""],["date",""],[1,"btn",2,"margin-top","5px","margin-left","5px",3,"click"],[1,"section-div"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"loader",2,"margin-left","50%"],[4,"ngFor","ngForOf"],["type","text"],["id",""],[1,"btn",2,"margin-top","7px",3,"click"],["email",""],["id","userModel",1,"modal",3,"click"],[1,"modal-content"],[1,"modal-header"],["id","model-close-btn",1,"close",3,"click"],["class","modal-body",4,"ngIf"],[3,"click"],[1,"btn",3,"click"],[1,"modal-body"],[3,"src"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"h3"),r.rc(2,"Submissions"),r.Qb(),r.Rb(3,"h4"),r.rc(4),r.Qb(),r.Rb(5,"button",1),r.Yb("click",function(){return e.loadMore()}),r.rc(6," Load More "),r.Qb(),r.Rb(7,"button",2),r.Yb("click",function(){return e.onExport()}),r.rc(8," Export "),r.Qb(),r.Rb(9,"div"),r.Nb(10,"input",3,4),r.Rb(12,"button",5),r.Yb("click",function(){r.kc(t);const i=r.jc(11);return e.onFillDate(i.value)}),r.rc(13," Change Date "),r.Qb(),r.Qb(),r.Rb(14,"div",6),r.Rb(15,"table",7),r.Rb(16,"thead"),r.Rb(17,"tr"),r.Rb(18,"th"),r.rc(19,"ID"),r.Qb(),r.Rb(20,"th"),r.rc(21,"Date of submission"),r.Qb(),r.Rb(22,"th"),r.rc(23,"User ID"),r.Qb(),r.Rb(24,"th"),r.rc(25,"Amount Earned"),r.Qb(),r.Rb(26,"th"),r.rc(27,"Contacts"),r.Qb(),r.Rb(28,"th"),r.rc(29,"Paid"),r.Qb(),r.Rb(30,"th"),r.rc(31,"Counts"),r.Qb(),r.Rb(32,"th"),r.rc(33,"Approved"),r.Qb(),r.Rb(34,"th"),r.rc(35,"View Image"),r.Qb(),r.Qb(),r.Qb(),r.Rb(36,"tbody"),r.Nb(37,"div",8),r.qc(38,l,20,8,"tr",9),r.Qb(),r.Rb(39,"tfoot"),r.Rb(40,"tr"),r.Rb(41,"td"),r.Nb(42,"input",10,11),r.Rb(44,"button",12),r.Yb("click",function(){r.kc(t);const i=r.jc(43);return e.onFilApprove(i.value)}),r.rc(45," Filter by View approved "),r.Qb(),r.Qb(),r.Rb(46,"td"),r.Nb(47,"input",10,13),r.Rb(49,"button",12),r.Yb("click",function(){r.kc(t);const i=r.jc(48);return e.onFilEmail(i.value)}),r.rc(50," Filter by UserEmail "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(51,"div",14),r.Yb("click",function(){return e.onClose()}),r.Rb(52,"div",15),r.Rb(53,"div",16),r.Rb(54,"span",17),r.Yb("click",function(){return e.onClose()}),r.rc(55,"\xd7"),r.Qb(),r.Qb(),r.qc(56,u,2,1,"div",18),r.Qb(),r.Qb()}2&t&&(r.Ab(4),r.tc("Total submissions --\x3e ",e.totalAmount,""),r.Ab(11),r.dc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.Ab(23),r.dc("ngForOf",e.data),r.Ab(18),r.dc("ngIf",e.image))},directives:[s.a,o.j,o.k],styles:[""]}),t})();function p(t,e){if(1&t){const t=r.Sb();r.Rb(0,"tr"),r.Rb(1,"td"),r.rc(2),r.Qb(),r.Rb(3,"td"),r.rc(4),r.Qb(),r.Rb(5,"td"),r.rc(6),r.Qb(),r.Rb(7,"td"),r.rc(8),r.Qb(),r.Rb(9,"td"),r.rc(10),r.Qb(),r.Rb(11,"td"),r.rc(12),r.Qb(),r.Rb(13,"td"),r.rc(14),r.Qb(),r.Rb(15,"td",10),r.Yb("click",function(){r.kc(t);const i=e.$implicit;return r.ac().onClick(i.id,i.viewsApproved,i.pathToUserRecord)}),r.rc(16),r.Qb(),r.Rb(17,"td"),r.Rb(18,"button",19),r.Yb("click",function(){r.kc(t);const i=e.$implicit;return r.ac().onImage(i.imageFile)}),r.rc(19," View Image "),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.sc(t.id),r.Ab(2),r.sc(t.date),r.Ab(2),r.sc(t.userID),r.Ab(2),r.sc(t.amountEarned),r.Ab(2),r.sc(t.numberOfContacts),r.Ab(2),r.sc(t.isPaid),r.Ab(2),r.sc(t.viewCount),r.Ab(2),r.tc(" ",t.viewsApproved," ")}}function m(t,e){if(1&t&&(r.Rb(0,"div",20),r.Nb(1,"img",21),r.Qb()),2&t){const t=r.ac();r.Ab(1),r.dc("src",t.image,r.mc)}}let g=(()=>{class t{constructor(t,e,i,o){this.db=t,this.route=e,this.toastrService=i,this.exportService=o,this.dtOptions={},this.dtTrigger=new n.a,this.data=[],this.totalAmount=0}ngOnInit(){this.route.params.subscribe(t=>{this.userId=t.id}),this.dtOptions={pagingType:"full_numbers",pageLength:10,responsive:!0,scrollY:"50vh",scrollX:!0},this.getData().then(t=>{this.dtTrigger.next()})}getData(){return new Promise((t,e)=>{this.db.collection("newSubmissions").ref.where("userID","==",this.userId).get().then(e=>{e.forEach(t=>{t.data()&&this.data.push(Object.assign({id:t.id},t.data()))}),t(e)})})}onFillDate(t){this.db.collection("newSubmissions").ref.where("date","==",t).where("userID","==",this.userId).get().then(t=>{t.forEach(t=>{t.data()&&this.data.push(Object.assign({id:t.id},t.data()))})})}rerender(){this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}onImage(t){var e;this.image="",this.image=t,null===(e=document.getElementById("userModel"))||void 0===e||e.classList.add("block")}loadMore(){this.getData()}onClick(t,e,i){let o=i.split("/");"true"==e||1==e?(this.db.collection("newSubmissions").doc(t).update({viewsApproved:!1}),this.db.collection("submissions").doc(o[2]).collection(o[3]).doc(o[4]).update({viewsApproved:!1}),this.data.filter(e=>e.id==t?e.viewsApproved=!1:"")):(this.db.collection("newSubmissions").doc(t).update({viewsApproved:!0}),this.db.collection("submissions").doc(o[2]).collection(o[3]).doc(o[4]).update({viewsApproved:!1}),this.data.filter(e=>e.id==t?e.viewsApproved=!0:"")),this.toastrService.success("Updated")}ngOnDestroy(){this.dtTrigger.unsubscribe()}onFilApprove(t){t&&(this.data=this.data.find(e=>e.viewsApproved===t)),this.toastrService.info("Filtered")}onFilEmail(t){t&&this.db.collection("users").ref.where("email","==",t).get().then(t=>{t.forEach(t=>{this.data=[],this.db.collection("newSubmissions").ref.where("userID","==",t.id).get().then(t=>{t.forEach(t=>{t.data()&&this.data.push(Object.assign({id:t.id},t.data()))})})})}),this.toastrService.info("Filtered")}onExport(){this.exportService.exportToCsv(this.data,`${Date()}`),this.toastrService.info("Exported")}onClose(){var t;null===(t=document.getElementById("userModel"))||void 0===t||t.classList.remove("block")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(b.a),r.Mb(c.a),r.Mb(a.b),r.Mb(d.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-submission-by-user-id"]],viewQuery:function(t,e){if(1&t&&r.uc(s.a,1),2&t){let t;r.ic(t=r.Zb())&&(e.datatableElement=t.first)}},decls:55,vars:5,consts:[[1,"right-content"],[1,"btn",2,"float","right",3,"click"],[1,"btn",2,"float","right","margin-bottom","7px","margin-right","5px",3,"click"],["type","date","name","","id",""],["date",""],[1,"btn",2,"margin-top","5px","margin-left","5px",3,"click"],[1,"section-div"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"loader",2,"margin-left","50%"],[4,"ngFor","ngForOf"],[3,"click"],["type","text"],["id",""],["email",""],["id","userModel",1,"modal",3,"click"],[1,"modal-content"],[1,"modal-header"],["id","model-close-btn",1,"close",3,"click"],["class","modal-body",4,"ngIf"],[1,"btn",3,"click"],[1,"modal-body"],[3,"src"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"h3"),r.rc(2,"Submissions"),r.Qb(),r.Rb(3,"h4"),r.rc(4),r.Qb(),r.Rb(5,"button",1),r.Yb("click",function(){return e.loadMore()}),r.rc(6," Load More "),r.Qb(),r.Rb(7,"button",2),r.Yb("click",function(){return e.onExport()}),r.rc(8," Export "),r.Qb(),r.Rb(9,"div"),r.Nb(10,"input",3,4),r.Rb(12,"button",5),r.Yb("click",function(){r.kc(t);const i=r.jc(11);return e.onFillDate(i.value)}),r.rc(13," Change Date "),r.Qb(),r.Qb(),r.Rb(14,"div",6),r.Rb(15,"table",7),r.Rb(16,"thead"),r.Rb(17,"tr"),r.Rb(18,"th"),r.rc(19,"Id"),r.Qb(),r.Rb(20,"th"),r.rc(21,"Date of submission"),r.Qb(),r.Rb(22,"th"),r.rc(23,"User ID"),r.Qb(),r.Rb(24,"th"),r.rc(25,"Amount Earned"),r.Qb(),r.Rb(26,"th"),r.rc(27,"Contacts"),r.Qb(),r.Rb(28,"th"),r.rc(29,"Paid"),r.Qb(),r.Rb(30,"th"),r.rc(31,"Counts"),r.Qb(),r.Rb(32,"th"),r.rc(33,"Approved"),r.Qb(),r.Rb(34,"th"),r.rc(35,"View Image"),r.Qb(),r.Qb(),r.Qb(),r.Rb(36,"tbody"),r.Nb(37,"div",8),r.qc(38,p,20,8,"tr",9),r.Qb(),r.Rb(39,"tfoot"),r.Rb(40,"tr"),r.Rb(41,"td",10),r.Yb("click",function(){r.kc(t);const i=r.jc(43);return e.onFilApprove(i.value)}),r.Nb(42,"input",11,12),r.rc(44,"Filter by View approved "),r.Qb(),r.Rb(45,"td",10),r.Yb("click",function(){r.kc(t);const i=r.jc(47);return e.onFilEmail(i.value)}),r.Nb(46,"input",11,13),r.rc(48,"Filter by UserEmail "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(49,"div",14),r.Yb("click",function(){return e.onClose()}),r.Rb(50,"div",15),r.Rb(51,"div",16),r.Rb(52,"span",17),r.Yb("click",function(){return e.onClose()}),r.rc(53,"\xd7"),r.Qb(),r.Qb(),r.qc(54,m,2,1,"div",18),r.Qb(),r.Qb()}2&t&&(r.Ab(4),r.tc("Total amount --\x3e ",e.totalAmount,""),r.Ab(11),r.dc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.Ab(23),r.dc("ngForOf",e.data),r.Ab(16),r.dc("ngIf",e.image))},directives:[s.a,o.j,o.k],styles:[""]}),t})();var v=i("3Pt+");const f=[{path:"",component:h},{path:":id",component:g}];let Q=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[o.b,c.e.forChild(f),v.h,v.n,s.b]]}),t})()}}]);