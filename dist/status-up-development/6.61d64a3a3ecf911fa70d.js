(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{RA1b:function(t,e,a){"use strict";a.r(e),a.d(e,"PayoutModule",function(){return m});var c=a("ofXK"),i=a("tyNb"),b=a("njyG"),o=a("XNiG"),r=a("fXoL"),n=a("I/3d"),s=a("Dfg1"),d=a("5eHb"),l=a("3Pt+");function u(t,e){if(1&t){const t=r.Sb();r.Rb(0,"td"),r.Rb(1,"input",20,12),r.Yb("change",function(){r.kc(t);const e=r.jc(2);return r.ac().$implicit.value=e.value}),r.Qb(),r.Qb()}}function h(t,e){if(1&t){const t=r.Sb();r.Rb(0,"td",16),r.Yb("click",function(){r.kc(t);const e=r.ac().$implicit;return e.isEditable=!e.isEditable}),r.rc(1),r.Qb()}if(2&t){const t=r.ac().$implicit;r.Ab(1),r.tc(" ",t.value," ")}}function p(t,e){if(1&t){const t=r.Sb();r.Rb(0,"tr"),r.Rb(1,"td"),r.rc(2),r.Qb(),r.Rb(3,"td"),r.rc(4),r.Qb(),r.Rb(5,"td"),r.rc(6),r.Qb(),r.Rb(7,"td"),r.rc(8),r.Qb(),r.Rb(9,"td"),r.rc(10),r.Qb(),r.Rb(11,"td"),r.rc(12),r.Qb(),r.Rb(13,"td",16),r.Yb("click",function(){r.kc(t);const a=e.$implicit;return r.ac().onApprovedChange(a.id,a.approved,a.pathToUserRecord)}),r.rc(14),r.Qb(),r.Rb(15,"td"),r.rc(16),r.Qb(),r.Rb(17,"td"),r.rc(18),r.Qb(),r.Rb(19,"td"),r.rc(20),r.Qb(),r.Rb(21,"td"),r.rc(22),r.Qb(),r.Rb(23,"td"),r.rc(24),r.Qb(),r.Rb(25,"td"),r.rc(26),r.Qb(),r.Rb(27,"td",16),r.Yb("click",function(){r.kc(t);const a=e.$implicit;return r.ac().onPaymentChange(a.id,a.paidOut,a.pathToUserRecord)}),r.rc(28),r.Qb(),r.Rb(29,"td"),r.rc(30),r.Qb(),r.qc(31,u,3,0,"td",17),r.qc(32,h,2,1,"td",18),r.Rb(33,"td"),r.Rb(34,"button",19),r.Yb("click",function(){r.kc(t);const a=e.$implicit,c=r.ac();return[a.isEditable=!a.isEditable,c.onChange(a.id,a.value,a.pathToUserRecord)]}),r.rc(35," Change Value "),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.sc(t.id),r.Ab(2),r.sc(t.date),r.Ab(2),r.sc(t.userId),r.Ab(2),r.sc(t.accountNameText),r.Ab(2),r.sc(t.accountNumberText),r.Ab(2),r.sc(t.accountTypeText),r.Ab(2),r.tc(" ",t.approved," "),r.Ab(2),r.sc(t.bankText),r.Ab(2),r.sc(t.brandCodeText),r.Ab(2),r.sc(t.eWallet),r.Ab(2),r.sc(t.fisrtName),r.Ab(2),r.sc(t.lastName),r.Ab(2),r.sc(t.mobileNumber),r.Ab(2),r.tc(" ",t.paidOut," "),r.Ab(2),r.sc(t.time),r.Ab(1),r.dc("ngIf",t.isEditable),r.Ab(1),r.dc("ngIf",!t.isEditable),r.Ab(2),r.dc("disabled",!t.isEditable)}}function R(t,e){if(1&t){const t=r.Sb();r.Rb(0,"td"),r.Rb(1,"input",14,15),r.Yb("change",function(){r.kc(t);const e=r.jc(2);return r.ac().$implicit.value=e.value}),r.Qb(),r.Qb()}}function g(t,e){if(1&t){const t=r.Sb();r.Rb(0,"td",10),r.Yb("click",function(){r.kc(t);const e=r.ac().$implicit;return e.isEditable=!e.isEditable}),r.rc(1),r.Qb()}if(2&t){const t=r.ac().$implicit;r.Ab(1),r.tc(" ",t.value," ")}}function Q(t,e){if(1&t){const t=r.Sb();r.Rb(0,"tr"),r.Rb(1,"td"),r.rc(2),r.Qb(),r.Rb(3,"td"),r.rc(4),r.Qb(),r.Rb(5,"td"),r.rc(6),r.Qb(),r.Rb(7,"td"),r.rc(8),r.Qb(),r.Rb(9,"td"),r.rc(10),r.Qb(),r.Rb(11,"td"),r.rc(12),r.Qb(),r.Rb(13,"td"),r.rc(14),r.Qb(),r.Rb(15,"td"),r.rc(16),r.Qb(),r.Rb(17,"td"),r.rc(18),r.Qb(),r.Rb(19,"td"),r.rc(20),r.Qb(),r.Rb(21,"td"),r.rc(22),r.Qb(),r.Rb(23,"td"),r.rc(24),r.Qb(),r.Rb(25,"td"),r.rc(26),r.Qb(),r.Rb(27,"td",10),r.Yb("click",function(){r.kc(t);const a=e.$implicit;return r.ac().onPaymentChange(a.id,a.paidOut,a.pathToUserRecord)}),r.rc(28),r.Qb(),r.Rb(29,"td"),r.rc(30),r.Qb(),r.qc(31,R,3,0,"td",11),r.qc(32,g,2,1,"td",12),r.Rb(33,"td"),r.Rb(34,"button",13),r.Yb("click",function(){r.kc(t);const a=e.$implicit,c=r.ac();return[a.isEditable=!a.isEditable,c.onChange(a.id,a.value,a.pathToUserRecord)]}),r.rc(35," Change Value "),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.sc(t.id),r.Ab(2),r.sc(t.date),r.Ab(2),r.sc(t.userId),r.Ab(2),r.sc(t.accountNameText),r.Ab(2),r.sc(t.accountNumberText),r.Ab(2),r.sc(t.accountTypeText),r.Ab(2),r.sc(t.approved),r.Ab(2),r.sc(t.bankText),r.Ab(2),r.sc(t.brandCodeText),r.Ab(2),r.sc(t.eWallet),r.Ab(2),r.sc(t.fisrtName),r.Ab(2),r.sc(t.lastName),r.Ab(2),r.sc(t.mobileNumber),r.Ab(2),r.tc(" ",t.paidOut," "),r.Ab(2),r.sc(t.time),r.Ab(1),r.dc("ngIf",t.isEditable),r.Ab(1),r.dc("ngIf",!t.isEditable),r.Ab(2),r.dc("disabled",!t.isEditable)}}const f=[{path:"",component:(()=>{class t{constructor(t,e,a){this.db=t,this.exportService=e,this.toastrService=a,this.dtOptions={},this.dtTrigger=new o.a,this.data=[],this.balance={},this.sumTotal=0}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,destroy:!0,responsive:!0,scrollX:!0,scrollY:"50vh",processing:!0},this.getData()}getData(){return new Promise((t,e)=>{this.data=[],this.balance={},this.db.collection("newPayouts").ref.get().then(t=>{let e=1;t.forEach(a=>{this.sumTotal+=parseFloat(a.data().value),this.data.push(Object.assign({id:a.id},a.data())),this.balance[a.data().userId]?this.balance[a.data().userId]+=parseFloat(a.data().value):this.balance[a.data().userId]=parseFloat(a.data().value),e==t.size&&this.dtTrigger.next(),e++})})})}rerender(){this.datatableElement.dtInstance.then(t=>{this.dtTrigger.next()})}loadMore(){this.getData()}onRefresh(){window.location.reload()}onChange(t,e,a){let c=a.split("/");this.db.collection("newPayouts").doc(t).update({value:e}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({value:e}),this.toastrService.success("Updated")}onFillDate(t){this.data=[],this.sumTotal=0,this.balance={},this.db.collection("newPayouts").ref.where("date","==",t).get().then(t=>{t.forEach(t=>{this.sumTotal+=parseFloat(t.data().value),this.data.push(Object.assign({id:t.id},t.data())),this.balance[t.data().userId]?this.balance[t.data().userId]+=parseFloat(t.data().value):this.balance[t.data().userId]=parseFloat(t.data().value)})})}onPaymentChange(t,e,a){let c=a.split("/");"true"==e||1==e?(this.db.collection("newPayouts").doc(t).update({paidOut:!1}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!1}),this.data.filter(e=>e.id==t?e.paidOut=!1:"")):(this.db.collection("newPayouts").doc(t).update({paidOut:!0}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!0}),this.data.filter(e=>e.id==t?e.paidOut=!0:"")),this.toastrService.success("updated")}onApprovedChange(t,e,a){let c=a.split("/");"true"==e||1==e?(this.db.collection("newPayouts").doc(t).update({approved:!1}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!1}),this.data.filter(e=>e.id==t?e.approved=!1:"")):(this.db.collection("newPayouts").doc(t).update({approved:!0}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!0}),this.data.filter(e=>e.id==t?e.approved=!0:"")),this.toastrService.success("updated")}onExport(){this.exportService.exportToCsv(this.data,`${Date()}`),this.toastrService.info("Exported")}onPaidoutFilter(t){let e=this.data.filter(e=>1==e.paidOut&&"true"==t||0==e.paidOut&&"false"==t?e:void 0);this.data=e}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(n.a),r.Mb(s.a),r.Mb(d.b))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-payouts"]],viewQuery:function(t,e){if(1&t&&r.uc(b.a,1),2&t){let t;r.ic(t=r.Zb())&&(e.datatableElement=t.first)}},decls:69,vars:4,consts:[[1,"right-content"],["type","date","name","","id",""],["date",""],[1,"btn",2,"margin-top","5px","margin-left","5px",3,"click"],[1,"btn",2,"float","right",3,"click"],[1,"btn",2,"float","right","margin-bottom","7px","margin-right","5px",3,"click"],[1,"btn",2,"float","right","margin-right","5px",3,"click"],[1,"section-div"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"loader",2,"margin-left","50%"],[4,"ngFor","ngForOf"],[1,"custom-select"],["val",""],["value","true"],["value","false"],[1,"btn",2,"margin-top","7px",3,"click"],[3,"click"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"btn",3,"disabled","click"],["type","text",3,"change"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"h3"),r.rc(2,"Payouts"),r.Qb(),r.Rb(3,"h4"),r.rc(4),r.Qb(),r.Rb(5,"div"),r.Nb(6,"input",1,2),r.Rb(8,"button",3),r.Yb("click",function(){r.kc(t);const a=r.jc(7);return e.onFillDate(a.value)}),r.rc(9," Change Date "),r.Qb(),r.Qb(),r.Rb(10,"button",4),r.Yb("click",function(){return e.loadMore()}),r.rc(11," Load More "),r.Qb(),r.Rb(12,"button",5),r.Yb("click",function(){return e.onExport()}),r.rc(13," Export "),r.Qb(),r.Rb(14,"button",6),r.Yb("click",function(){return e.onRefresh()}),r.rc(15," Reload "),r.Qb(),r.Rb(16,"div",7),r.Rb(17,"table",8),r.Rb(18,"thead"),r.Rb(19,"tr"),r.Rb(20,"th"),r.rc(21,"Id"),r.Qb(),r.Rb(22,"th"),r.rc(23,"Payment Date"),r.Qb(),r.Rb(24,"th"),r.rc(25,"User ID"),r.Qb(),r.Rb(26,"th"),r.rc(27,"Acount Name"),r.Qb(),r.Rb(28,"th"),r.rc(29,"Acount Number"),r.Qb(),r.Rb(30,"th"),r.rc(31,"Acount Type Text"),r.Qb(),r.Rb(32,"th"),r.rc(33,"Approved"),r.Qb(),r.Rb(34,"th"),r.rc(35,"Bank Text"),r.Qb(),r.Rb(36,"th"),r.rc(37,"Branch Code Text"),r.Qb(),r.Rb(38,"th"),r.rc(39,"E-Wallet"),r.Qb(),r.Rb(40,"th"),r.rc(41,"First Name"),r.Qb(),r.Rb(42,"th"),r.rc(43,"Last Name"),r.Qb(),r.Rb(44,"th"),r.rc(45,"Mobile Number"),r.Qb(),r.Rb(46,"th"),r.rc(47,"Paid out"),r.Qb(),r.Rb(48,"th"),r.rc(49,"Time"),r.Qb(),r.Rb(50,"th"),r.rc(51,"Value"),r.Qb(),r.Rb(52,"th"),r.rc(53,"Action"),r.Qb(),r.Qb(),r.Qb(),r.Rb(54,"tbody"),r.Nb(55,"div",9),r.qc(56,p,36,18,"tr",10),r.Qb(),r.Rb(57,"tfoot"),r.Rb(58,"tr"),r.Rb(59,"td"),r.Rb(60,"select",11,12),r.Rb(62,"option",13),r.rc(63,"true"),r.Qb(),r.Rb(64,"option",14),r.rc(65,"false"),r.Qb(),r.Qb(),r.Nb(66,"br"),r.Rb(67,"button",15),r.Yb("click",function(){r.kc(t);const a=r.jc(61);return e.onPaidoutFilter(a.value)}),r.rc(68," Filter by Paid out "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(4),r.tc("Total sum --\x3e ",e.sumTotal,""),r.Ab(13),r.dc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.Ab(39),r.dc("ngForOf",e.data))},directives:[b.a,c.j,l.l,l.p,c.k],styles:[""]}),t})()},{path:":id",component:(()=>{class t{constructor(t,e,a,c){this.db=t,this.route=e,this.toastrService=a,this.exportService=c,this.dtOptions={},this.dtTrigger=new o.a,this.data=[],this.balance={},this.sumTotal=0}ngOnInit(){this.route.params.subscribe(t=>{this.userId=t.id}),this.dtOptions={pagingType:"full_numbers",pageLength:10,responsive:!0,scrollX:!0,scrollY:"50vh",processing:!0},this.getData().then(t=>{this.dtTrigger.next()})}getData(){return new Promise((t,e)=>{this.db.collection("newPayouts").ref.where("userId","==",this.userId).get().then(e=>{e.forEach(t=>{this.sumTotal+=parseFloat(t.data().value),this.data.push(Object.assign({id:t.id},t.data())),this.balance[t.data().userId]?this.balance[t.data().userId]+=parseFloat(t.data().value):this.balance[t.data().userId]=parseFloat(t.data().value)}),t(e)})})}rerender(){this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}loadMore(){this.getData()}onChange(t,e,a){let c=a.split("/");this.db.collection("newPayouts").doc(t).update({value:e}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({value:e}),this.toastrService.success("Updated")}onFillDate(t){this.data=[],this.sumTotal=0,this.balance={},this.db.collection("newPayouts").ref.where("date","==",t).get().then(t=>{t.forEach(t=>{this.sumTotal+=parseFloat(t.data().value),this.data.push(Object.assign({id:t.id},t.data())),this.balance[t.data().userId]?this.balance[t.data().userId]+=parseFloat(t.data().value):this.balance[t.data().userId]=parseFloat(t.data().value)})})}onPaymentChange(t,e,a){let c=a.split("/");"true"==e||1==e?(this.db.collection("newPayouts").doc(t).update({paidOut:!1}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!1}),this.data.filter(e=>e.id==t?e.paidOut=!1:"")):(this.db.collection("newPayouts").doc(t).update({paidOut:!0}),this.db.collection("payouts").doc(c[2]).collection(c[3]).doc(c[4]).update({paidOut:!0}),this.data.filter(e=>e.id==t?e.paidOut=!0:"")),this.toastrService.success("updated")}onExport(){this.exportService.exportToCsv(this.data,`${Date()}`),this.toastrService.info("Exported")}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(n.a),r.Mb(i.a),r.Mb(d.b),r.Mb(s.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-payouts-by-user-id"]],viewQuery:function(t,e){if(1&t&&r.uc(b.a,1),2&t){let t;r.ic(t=r.Zb())&&(e.datatableElement=t.first)}},decls:55,vars:4,consts:[[1,"right-content"],["type","date","name","","id",""],["date",""],[1,"btn",2,"margin-top","5px","margin-left","5px",3,"click"],[1,"btn",2,"float","right",3,"click"],[1,"btn",2,"float","right","margin-bottom","7px","margin-right","5px",3,"click"],[1,"section-div"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"loader",2,"margin-left","50%"],[4,"ngFor","ngForOf"],[3,"click"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"btn",3,"disabled","click"],["type","text",3,"change"],["val",""]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"h3"),r.rc(2,"Payouts"),r.Qb(),r.Rb(3,"h4"),r.rc(4),r.Qb(),r.Rb(5,"div"),r.Nb(6,"input",1,2),r.Rb(8,"button",3),r.Yb("click",function(){r.kc(t);const a=r.jc(7);return e.onFillDate(a.value)}),r.rc(9," Change Date "),r.Qb(),r.Qb(),r.Rb(10,"button",4),r.Yb("click",function(){return e.loadMore()}),r.rc(11," Load More "),r.Qb(),r.Rb(12,"button",5),r.Yb("click",function(){return e.onExport()}),r.rc(13," Export "),r.Qb(),r.Rb(14,"div",6),r.Rb(15,"table",7),r.Rb(16,"thead"),r.Rb(17,"tr"),r.Rb(18,"th"),r.rc(19,"Id"),r.Qb(),r.Rb(20,"th"),r.rc(21,"Payment Date"),r.Qb(),r.Rb(22,"th"),r.rc(23,"User ID"),r.Qb(),r.Rb(24,"th"),r.rc(25,"Acount Name"),r.Qb(),r.Rb(26,"th"),r.rc(27,"Acount Number"),r.Qb(),r.Rb(28,"th"),r.rc(29,"Acount Type Text"),r.Qb(),r.Rb(30,"th"),r.rc(31,"Approved"),r.Qb(),r.Rb(32,"th"),r.rc(33,"Bank Text"),r.Qb(),r.Rb(34,"th"),r.rc(35,"Branch Code Text"),r.Qb(),r.Rb(36,"th"),r.rc(37,"E-Wallet"),r.Qb(),r.Rb(38,"th"),r.rc(39,"First Name"),r.Qb(),r.Rb(40,"th"),r.rc(41,"Last Name"),r.Qb(),r.Rb(42,"th"),r.rc(43,"Mobile Number"),r.Qb(),r.Rb(44,"th"),r.rc(45,"Paid out"),r.Qb(),r.Rb(46,"th"),r.rc(47,"Time"),r.Qb(),r.Rb(48,"th"),r.rc(49,"Value"),r.Qb(),r.Rb(50,"th"),r.rc(51,"Action"),r.Qb(),r.Qb(),r.Qb(),r.Rb(52,"tbody"),r.Nb(53,"div",8),r.qc(54,Q,36,18,"tr",9),r.Qb(),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(4),r.tc("Total sum --\x3e ",e.sumTotal,""),r.Ab(11),r.dc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.Ab(39),r.dc("ngForOf",e.data))},directives:[b.a,c.j,c.k],styles:[""]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[c.b,i.e.forChild(f),l.h,l.n,b.b]]}),t})()}}]);