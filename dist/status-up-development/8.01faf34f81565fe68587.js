(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{hy7v:function(t,c,e){"use strict";e.r(c),e.d(c,"UsersModule",function(){return m});var i=e("ofXK"),b=e("tyNb"),n=e("njyG"),r=e("XNiG"),s=e("fXoL"),o=e("I/3d"),a=e("Dfg1"),d=e("5eHb");function l(t,c){if(1&t&&(s.Rb(0,"div"),s.Rb(1,"pre"),s.rc(2),s.bc(3,"json"),s.Qb(),s.Qb()),2&t){const t=s.ac();s.Ab(2),s.sc(s.cc(3,1,t.filterUser))}}function u(t,c){if(1&t){const t=s.Sb();s.Rb(0,"td"),s.Rb(1,"input",16,17),s.Yb("change",function(){s.kc(t);const c=s.jc(2);return s.ac().$implicit.wallet=c.value}),s.Qb(),s.Qb()}}function h(t,c){if(1&t){const t=s.Sb();s.Rb(0,"td",13),s.Yb("click",function(){s.kc(t);const c=s.ac().$implicit;return c.isEditable=!c.isEditable}),s.rc(1),s.Qb()}if(2&t){const t=s.ac().$implicit;s.Ab(1),s.tc(" ",t.wallet," ")}}function p(t,c){if(1&t){const t=s.Sb();s.Rb(0,"tr"),s.Rb(1,"td"),s.Rb(2,"button",11),s.Yb("click",function(){s.kc(t);const e=c.$implicit;return s.ac().onSubmissions(e.userId)}),s.rc(3," Submission "),s.Qb(),s.Rb(4,"button",12),s.Yb("click",function(){s.kc(t);const e=c.$implicit;return s.ac().onPayouts(e.userId)}),s.rc(5," Payouts "),s.Qb(),s.Qb(),s.Rb(6,"td"),s.rc(7),s.Qb(),s.Rb(8,"td"),s.rc(9),s.Qb(),s.Rb(10,"td"),s.rc(11),s.Qb(),s.Rb(12,"td"),s.rc(13),s.Qb(),s.Rb(14,"td",13),s.Yb("click",function(){s.kc(t);const e=c.$implicit;return s.ac().onBlock(e.userId,e.accountActivated,"accountActivated")}),s.rc(15),s.Qb(),s.Rb(16,"td"),s.rc(17),s.Qb(),s.Rb(18,"td"),s.rc(19),s.Qb(),s.Rb(20,"td"),s.rc(21),s.Qb(),s.Rb(22,"td"),s.rc(23),s.Qb(),s.Rb(24,"td"),s.rc(25),s.Qb(),s.Rb(26,"td",13),s.Yb("click",function(){s.kc(t);const e=c.$implicit;return s.ac().onBlock(e.userId,e.eWallet,"eWallet")}),s.rc(27),s.Qb(),s.Rb(28,"td"),s.rc(29),s.Qb(),s.qc(30,u,3,0,"td",1),s.qc(31,h,2,1,"td",14),s.Rb(32,"td"),s.rc(33),s.Qb(),s.Rb(34,"td"),s.Rb(35,"button",15),s.Yb("click",function(){s.kc(t);const e=c.$implicit,i=s.ac();return[e.isEditable=!e.isEditable,i.onChange(e.userId,e.wallet)]}),s.rc(36," Change Value "),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=c.$implicit;s.Ab(7),s.sc(t.userId),s.Ab(2),s.sc(t.firstName),s.Ab(2),s.sc(t.lastName),s.Ab(2),s.sc(t.mobileNumber),s.Ab(2),s.tc(" ",t.accountActivated," "),s.Ab(2),s.sc(t.accountName),s.Ab(2),s.sc(t.accountNumber),s.Ab(2),s.sc(t.accountType),s.Ab(2),s.sc(t.bank),s.Ab(2),s.sc(t.branchCode),s.Ab(2),s.tc(" ",t.eWallet," "),s.Ab(2),s.sc(t.email),s.Ab(1),s.dc("ngIf",t.isEditable),s.Ab(1),s.dc("ngIf",!t.isEditable),s.Ab(2),s.sc(t.whatsAppNumber),s.Ab(2),s.dc("disabled",!t.isEditable)}}let f=(()=>{class t{constructor(t,c,e,i){this.db=t,this.router=c,this.exportService=e,this.toastrService=i,this.dtOptions={},this.dtTrigger=new r.a,this.data=[],this.dataId=[]}ngOnInit(){this.dtOptions={pagingType:"simple_numbers",pageLength:20,scrollX:!0,scrollY:"50vh",responsive:!0},this.getdbData()}getdbData(){return new Promise((t,c)=>{this.db.collection("/users").ref.get().then(t=>{let c=1;t.forEach(e=>{this.dataId.push(e.id),this.data.push(e.data()),c==t.size&&this.dtTrigger.next(),c++})})})}rerender(){this.datatableElement.dtInstance.then(t=>{window.dispatchEvent(new Event("resize")),t.destroy(),this.dtTrigger.next()})}onSearch(t){let c=[];this.data.find(e=>{JSON.stringify(Object.values(e)).match(t)&&c.push(e)}),this.data=c}ngOnDestroy(){this.dtTrigger.unsubscribe()}onBlock(t,c,e){1==c||"true"==c?this.db.collection("/users").doc(t).ref.update("accountActivated"==e?{accountActivated:!1}:{eWallet:!1}):this.db.collection("/users").doc(t).ref.update("accountActivated"==e?{accountActivated:!0}:{eWallet:!0}),this.toastrService.success("This account has been blocked successfully"),setTimeout(()=>{window.location.reload()},1e3)}onFilId(t){t&&(this.filterUser=this.data.find(c=>c.userId===t)),this.toastrService.info("Filtered")}onFilEmail(t){t&&(this.filterUser=this.data.find(c=>c.email===t)),this.toastrService.info("Filtered")}onExport(){this.exportService.exportToCsv(this.data,`${Date()}`),this.toastrService.info("Exported")}onChange(t,c){this.db.collection("users").doc(t).ref.update({wallet:c}),this.toastrService.success("Updated")}onSubmissions(t){this.router.navigate([`submissions/${t}`])}onPayouts(t){this.router.navigate([`payouts/${t}`])}}return t.\u0275fac=function(c){return new(c||t)(s.Mb(o.a),s.Mb(b.b),s.Mb(a.a),s.Mb(d.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-users"]],viewQuery:function(t,c){if(1&t&&s.uc(n.a,1),2&t){let t;s.ic(t=s.Zb())&&(c.datatableElement=t.first)}},decls:57,vars:4,consts:[[1,"right-content"],[4,"ngIf"],[1,"btn",2,"float","right","margin-bottom","7px",3,"click"],[1,"section-div"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"loader",2,"margin-left","50%"],[4,"ngFor","ngForOf"],["type","text"],["id",""],[1,"btn",2,"margin-top","7px",3,"click"],["email",""],[1,"btn",3,"click"],[1,"btn","margin-left-10",3,"click"],[3,"click"],[3,"click",4,"ngIf"],[1,"btn",3,"disabled","click"],["type","text",3,"change"],["val",""]],template:function(t,c){if(1&t){const t=s.Sb();s.Rb(0,"div",0),s.Rb(1,"h3"),s.rc(2,"Users"),s.Qb(),s.qc(3,l,4,3,"div",1),s.Rb(4,"button",2),s.Yb("click",function(){return c.onExport()}),s.rc(5," Export "),s.Qb(),s.Rb(6,"div",3),s.Rb(7,"table",4),s.Rb(8,"thead"),s.Rb(9,"tr"),s.Rb(10,"th"),s.rc(11,"Links"),s.Qb(),s.Rb(12,"th"),s.rc(13,"User ID"),s.Qb(),s.Rb(14,"th"),s.rc(15,"First Name"),s.Qb(),s.Rb(16,"th"),s.rc(17,"Last Name"),s.Qb(),s.Rb(18,"th"),s.rc(19,"Mobile No"),s.Qb(),s.Rb(20,"th"),s.rc(21,"Acount Activated"),s.Qb(),s.Rb(22,"th"),s.rc(23,"Acount Name"),s.Qb(),s.Rb(24,"th"),s.rc(25,"Acount Number"),s.Qb(),s.Rb(26,"th"),s.rc(27,"Acount Type"),s.Qb(),s.Rb(28,"th"),s.rc(29,"Bank"),s.Qb(),s.Rb(30,"th"),s.rc(31,"Branch Code"),s.Qb(),s.Rb(32,"th"),s.rc(33,"E-Wallet"),s.Qb(),s.Rb(34,"th"),s.rc(35,"Email"),s.Qb(),s.Rb(36,"th"),s.rc(37,"Wallet"),s.Qb(),s.Rb(38,"th"),s.rc(39,"Whatsapp No"),s.Qb(),s.Rb(40,"th"),s.rc(41,"Action"),s.Qb(),s.Qb(),s.Qb(),s.Rb(42,"tbody"),s.Nb(43,"div",5),s.qc(44,p,37,16,"tr",6),s.Qb(),s.Rb(45,"tfoot"),s.Rb(46,"tr"),s.Rb(47,"td"),s.Nb(48,"input",7,8),s.Rb(50,"button",9),s.Yb("click",function(){s.kc(t);const e=s.jc(49);return c.onFilId(e.value)}),s.rc(51," Filter by UID "),s.Qb(),s.Qb(),s.Rb(52,"td"),s.Nb(53,"input",7,10),s.Rb(55,"button",9),s.Yb("click",function(){s.kc(t);const e=s.jc(54);return c.onFilEmail(e.value)}),s.rc(56," Filter by UserEmail "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}2&t&&(s.Ab(3),s.dc("ngIf",c.filterUser),s.Ab(4),s.dc("dtOptions",c.dtOptions)("dtTrigger",c.dtTrigger),s.Ab(37),s.dc("ngForOf",c.data))},directives:[i.k,n.a,i.j],pipes:[i.e],styles:[""]}),t})();var Q=e("3Pt+");const R=[{path:"",component:f}];let m=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(c){return new(c||t)},imports:[[i.b,b.e.forChild(R),Q.h,Q.n,n.b]]}),t})()}}]);